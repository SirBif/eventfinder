PREPARE retrieveQuery (NUMERIC, NUMERIC, NUMERIC, NUMERIC, TIMESTAMPTZ) AS 
SELECT name, start_date AS start_time, end_date AS end_time, attending_total AS people, location, latitude, longitude, eid
FROM events WHERE
( (start_date >= $5 AND start_date < $5 + interval '24 hours')
OR (start_date < $5 AND end_date > now()) )
AND last_update IS NOT NULL
AND latitude > $1 AND latitude < $2
AND longitude < $3 AND longitude > $4
ORDER BY people DESC LIMIT 100;
